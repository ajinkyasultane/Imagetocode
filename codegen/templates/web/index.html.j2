<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ meta.title | e }}</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="canvas" style="width: {{ meta.w }}px; height: {{ meta.h }}px;">
      {% for el in elements %}
        {% if el.bbox and el.bbox|length == 4 %}
          {% set x1, y1, x2, y2 = el.bbox %}
          {% set width = x2 - x1 %}
          {% set height = y2 - y1 %}
        {% else %}
          {% set x1, y1, x2, y2 = 0, 0, 100, 30 %}
          {% set width = 100 %}
          {% set height = 30 %}
        {% endif %}
        
        {% if el.type == 'text' %}
          {% set tag = 'h1' if el.style.role == 'h1' else 'p' %}
          <{{ tag }} class="element text-element" id="{{ el.id }}" 
                     style="left: {{ x1 }}px; top: {{ y1 }}px; width: {{ width }}px; height: {{ height }}px;">
            {{ el.text | e }}
          </{{ tag }}>
          
        {% elif el.type == 'input' %}
          <input class="element input-element" id="{{ el.id }}" 
                 type="{{ 'password' if el.secure else 'text' }}" 
                 placeholder="{{ (el.placeholder or '') | e }}"
                 style="left: {{ x1 }}px; top: {{ y1 }}px; width: {{ width }}px; height: {{ height }}px;" />
          
        {% elif el.type == 'button' %}
          <button class="element button-element {{ 'primary' if el.style.variant == 'primary' else 'secondary' }}" 
                  id="{{ el.id }}"
                  style="left: {{ x1 }}px; top: {{ y1 }}px; width: {{ width }}px; height: {{ height }}px;">
            {{ (el.text or 'Button') | e }}
          </button>
          
        {% elif el.type == 'image' %}
          <div class="element image-element" id="{{ el.id }}"
               style="left: {{ x1 }}px; top: {{ y1 }}px; width: {{ width }}px; height: {{ height }}px;">
            {% if el.src %}
              <img src="{{ el.src | e }}" alt="{{ ('image_' + el.id) | e }}" />
            {% else %}
              <div class="image-placeholder">{{ ('image_' + el.id) | e }}</div>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
    <script src="app.js"></script>
  </body>
</html>
